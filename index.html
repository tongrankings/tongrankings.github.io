<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TongTest</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/controls/OrbitControls.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f5f7fa;
            color: #333;
            line-height: 1.6;
        }
        
        header {
            background: linear-gradient(135deg, #1a73e8, #0d47a1);
            color: white;
            padding: 1.5rem 2rem;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }
        
        .header-content {
            max-width: 1200px;
            margin: 0 auto;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        h1 {
            font-size: 1.8rem;
            font-weight: 600;
        }
        
        nav ul {
            display: flex;
            list-style: none;
        }
        
        nav li {
            margin-left: 1.5rem;
        }
        
        nav a {
            color: white;
            text-decoration: none;
            font-weight: 500;
            padding: 0.5rem 1rem;
            border-radius: 4px;
            transition: background-color 0.3s;
        }
        
        nav a:hover, nav a.active {
            background-color: rgba(255, 255, 255, 0.2);
        }

        /* 新增Banner样式 */
        .banner {
            width: 100%;
            height: 400px;
            overflow: hidden;
            position: relative;
            background-color: #1a237e; /* 备用背景色，以防图片加载失败 */
        }
        
        .banner img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            display: block;
        }

        .banner video {
            width: 100%;
            height: 100%;
            object-fit: cover;  /* 让视频铺满整个 banner 区域 */
            display: block;
        }

        .banner-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.3); /* 半透明遮罩，提高文字可读性 */
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .banner-text {
            text-align: center;
            color: white;
            text-shadow: 1px 1px 3px rgba(0, 0, 0, 0.7);
            max-width: 800px;
            padding: 0 2rem;
        }
        
        .banner-text h2 {
            font-size: 2.8rem;
            margin-bottom: 1rem;
            color: white;
            border-bottom: none;
            padding-bottom: 0;
        }
        
        .banner-text p {
            font-size: 1.4rem;
            margin: 0 auto;
            color: white;
        }
        
        main {
            max-width: 1200px;
            margin: 2rem auto;
            padding: 0 1.5rem;
        }
        
        .view-switcher {
            display: flex;
            margin-bottom: 2rem;
            background-color: white;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
            overflow: hidden;
        }
        
        .view-option {
            flex: 1;
            text-align: center;
            padding: 1rem;
            cursor: pointer;
            transition: all 0.3s;
            font-weight: 500;
        }
        
        .view-option.active {
            background-color: #1a73e8;
            color: white;
        }
        
        .view-option:hover:not(.active) {
            background-color: #f0f5ff;
        }
        
        .section {
            background-color: white;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
            padding: 1.5rem;
            margin-bottom: 2rem;
        }
        
        h2 {
            font-size: 1.5rem;
            margin-bottom: 1rem;
            color: #1a73e8;
            border-bottom: 1px solid #eaeaea;
            padding-bottom: 0.5rem;
        }
        
        h3 {
            font-size: 1.2rem;
            margin: 1.5rem 0 1rem;
            color: #444;
        }
        
        p {
            margin-bottom: 1rem;
            color: #555;
        }
        
        .tasks-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 1.5rem;
            margin-top: 1.5rem;
        }
        
        .task-card {
            border: 1px solid #eaeaea;
            border-radius: 6px;
            padding: 1rem;
            transition: transform 0.3s, box-shadow 0.3s;
        }
        
        .task-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.08);
        }
        
        .task-card h4 {
            font-size: 1.1rem;
            margin-bottom: 0.5rem;
            color: #1a73e8;
        }
        
        .dimension-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 1.5rem;
            margin-top: 1.5rem;
        }
        
        .dimension-card {
            border: 1px solid #eaeaea;
            border-radius: 6px;
            padding: 1.5rem;
            transition: transform 0.3s, box-shadow 0.3s;
            background-color: #f8f9fa;
        }
        
        .dimension-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.08);
        }
        
        .dimension-card h4 {
            font-size: 1.1rem;
            margin-bottom: 1rem;
            color: #1a73e8;
        }
        
        .dimension-card ul {
            list-style-type: none;
            padding-left: 0;
        }
        
        .dimension-card li {
            padding: 0.3rem 0;
            border-bottom: 1px solid #eaeaea;
        }
        
        .dimension-card li:last-child {
            border-bottom: none;
        }
        
        .controls {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
            flex-wrap: wrap;
            gap: 1rem;
        }
        
        .model-selectors {
            display: flex;
            flex-wrap: wrap;
            gap: 1rem;
        }
        
        .model-checkbox {
            display: flex;
            align-items: center;
            cursor: pointer;
        }
        
        .model-checkbox input {
            margin-right: 0.5rem;
        }
        
        .select-all {
            background-color: #1a73e8;
            color: white;
            border: none;
            padding: 0.5rem 1rem;
            border-radius: 4px;
            cursor: pointer;
            font-weight: 500;
            transition: background-color 0.3s;
        }
        
        .select-all:hover {
            background-color: #0d47a1;
        }
        
        table {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: 2rem;
        }
        
        th, td {
            padding: 0.75rem 1rem;
            text-align: left;
            border-bottom: 1px solid #eaeaea;
        }
        
        th {
            background-color: #f8f9fa;
            font-weight: 600;
            color: #444;
            cursor: pointer;
            position: relative;
            user-select: none;
        }
        
        th:hover {
            background-color: #e9ecef;
        }
        
        th i {
            margin-left: 5px;
            color: #888;
            font-size: 0.8rem;
        }
        
        tr:hover {
            background-color: #f8f9fa;
        }
        
        .score-cell {
            text-align: center;
            font-weight: 500;
        }
        
        .model-name {
            display: flex;
            align-items: center;
        }
        
        .medal {
            margin-right: 8px;
            font-size: 1.2rem;
        }
        
        .gold {
            color: #FFD700;
        }
        
        .silver {
            color: #C0C0C0;
        }
        
        .bronze {
            color: #CD7F32;
        }
        
        .chart-container {
            height: 500px;
            margin: 2rem 0;
        }
        
        /* 三维可视化容器 - 重新布局 */
        .stage-chart-wrapper {
            display: flex;
            gap: 1.5rem;
            margin: 2rem 0;
        }
        
        #stage-chart-container {
            flex: 2;
            height: 600px;
            border: 1px solid #eaeaea;
            border-radius: 8px;
            overflow: hidden;
        }
        
        #stage-chart-info {
            flex: 1;
            background: white;
            padding: 1.5rem;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
            max-height: 600px;
            overflow-y: auto;
        }
        
        .stage-controls {
            display: flex;
            gap: 10px;
            margin-top: 15px;
        }
        
        .stage-controls button {
            background-color: #1a73e8;
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 0.9rem;
        }
        
        .stage-controls button:hover {
            background-color: #0d47a1;
        }
        
        .age-sphere {
            display: inline-block;
            width: 12px;
            height: 12px;
            border-radius: 50%;
            margin-right: 5px;
        }
        
        footer {
            background-color: #1a237e;
            color: white;
            text-align: center;
            padding: 1.5rem;
            margin-top: 3rem;
        }
        
        .hidden {
            display: none;
        }
        
        @media (max-width: 768px) {
            .banner {
                height: 250px;
            }
            
            .banner-text h2 {
                font-size: 1.8rem;
            }
            
            .banner-text p {
                font-size: 1.1rem;
            }
            
            .header-content {
                flex-direction: column;
                text-align: center;
            }
            
            nav ul {
                margin-top: 1rem;
                justify-content: center;
            }
            
            nav li {
                margin: 0 0.5rem;
            }
            
            .tasks-grid, .dimension-grid {
                grid-template-columns: 1fr;
            }
            
            .controls {
                flex-direction: column;
                align-items: flex-start;
            }
            
            table {
                display: block;
                overflow-x: auto;
            }
            
            th, td {
                padding: 0.5rem 0.75rem;
            }
            
            .stage-chart-wrapper {
                flex-direction: column;
            }
            
            #stage-chart-container {
                height: 400px;
            }
            
            #stage-chart-info {
                max-height: none;
            }
        }

        #infoPanel {
            position: absolute;
            padding: 8px 12px;
            background: rgba(255,255,255,0.9);
            border: 1px solid #ccc;
            border-radius: 6px;
            box-shadow: 0 2px 6px rgba(0,0,0,0.2);
            font-size: 14px;
            display: none; /* 默认隐藏 */
            pointer-events: none; /* 不挡鼠标事件 */
        }

    </style>
</head>
<body>
    <header>
        <div class="header-content">
            <h1>TongTest-通用具身交互测试平台</h1>
            <nav>
                <ul>
                    <li><a href="#" class="active" data-view="ability">能力视图</a></li>
                    <li><a href="#" data-view="dimension">维度视图</a></li>
                    <li><a href="#" data-view="stage">发展阶段对照榜</a></li>
                    <li><a href="#" data-view="about">关于我们</a></li>
                </ul>
            </nav>
        </div>
    </header>
    
    <!-- 新增Banner区域 -->
    <div class="banner">
        <!-- 请将src属性中的"banner.jpg"替换为您的本地图片路径 -->
        <img src="./banner.png" alt="TongTest Banner">


        <div class="banner-overlay">
            <div class="banner-text">
                <h2>TongTest - AGI新时代的北极星</h2>
                <p> 全面评估AI智能体在类人评估体系中的多维度发展水平</p>
            </div>
        </div>
    </div>

    <div id="infoPanel"></div>
    
    <main>
        <div class="view-switcher">
            <div class="view-option active" data-view="ability">能力视图</div>
            <div class="view-option" data-view="dimension">维度视图</div>
            <div class="view-option" data-view="stage">发展阶段对照榜</div>
        </div>
        
        <!-- 能力视图内容 -->
        <section class="section" id="ability-view">
            <h2>测试任务介绍</h2>
            <p>本平台对多模态大模型在8项核心测试任务上的表现进行评估，全面衡量模型在物品识别、空间理解、任务规划等方面的能力。</p>
            
            <div class="tasks-grid">
                <div class="task-card">
                    <h4>物品计数</h4>
                    <p>评估模型识别并统计场景中特定物品数量的能力。</p>
                </div>
                <div class="task-card">
                    <h4>准备行李</h4>
                    <p>测试模型根据旅行需求选择和整理合适物品的能力。</p>
                </div>
                <div class="task-card">
                    <h4>搭建积木</h4>
                    <p>评估模型理解和执行积木搭建指令的空间推理与操作能力。</p>
                </div>
                <div class="task-card">
                    <h4>智慧拼图</h4>
                    <p>测试模型识别图案并完成拼图任务的视觉推理能力。</p>
                </div>
                <div class="task-card">
                    <h4>理解按钮</h4>
                    <p>评估模型识别按钮功能并预测操作结果的能力。</p>
                </div>
                <div class="task-card">
                    <h4>整理桌面</h4>
                    <p>测试模型根据物品类别和空间关系进行合理摆放的能力。</p>
                </div>
                <div class="task-card">
                    <h4>打扫房间</h4>
                    <p>评估模型规划清洁任务并执行合理操作序列的能力。</p>
                </div>
                <div class="task-card">
                    <h4>挑选礼物</h4>
                    <p>测试模型根据人物关系和场景需求选择合适礼物的能力。</p>
                </div>
            </div>
        </section>
        
        <section class="section" id="ability-results">
            <h2>模型性能对比</h2>
            
            <div class="controls">
                <div class="model-selectors" id="modelSelectors">
                    <!-- 模型选择器将通过JavaScript动态生成 -->
                </div>
                <button class="select-all" id="selectAllBtn">全选/取消全选</button>
            </div>
            
            <div class="chart-container">
                <canvas id="radarChart"></canvas>
            </div>
            
            <table id="resultsTable">
                <thead>
                    <tr>
                        <th data-sort="name">模型 <i class="fas fa-sort"></i></th>
                        <th data-sort="avg">平均得分 <i class="fas fa-sort"></i></th>
                        <th data-sort="0">物品计数 <i class="fas fa-sort"></i></th>
                        <th data-sort="1">准备行李 <i class="fas fa-sort"></i></th>
                        <th data-sort="2">搭建积木 <i class="fas fa-sort"></i></th>
                        <th data-sort="3">智慧拼图 <i class="fas fa-sort"></i></th>
                        <th data-sort="4">理解按钮 <i class="fas fa-sort"></i></th>
                        <th data-sort="5">整理桌面 <i class="fas fa-sort"></i></th>
                        <th data-sort="6">打扫房间 <i class="fas fa-sort"></i></th>
                        <th data-sort="7">挑选礼物 <i class="fas fa-sort"></i></th>
                    </tr>
                </thead>
                <tbody>
                    <!-- 表格内容将通过JavaScript动态生成 -->
                </tbody>
            </table>
        </section>
        
        <!-- 维度视图内容 -->
        <section class="section hidden" id="dimension-view">
            <h2>测试维度介绍</h2>
            <p>本平台将8项测试任务归纳为3个核心维度，从不同角度评估多模态大模型的综合能力。</p>
            
            <div class="dimension-grid">
                <div class="dimension-card">
                    <h4>物体理解维度</h4>
                    <p>评估模型对物体识别、计数、价值评估与选择的能力</p>
                    <ul>
                        <li>物品计数：识别并统计场景中特定物品数量</li>
                        <li>挑选礼物：根据场景需求选择合适的物品</li>
                    </ul>
                </div>
                <div class="dimension-card">
                    <h4>空间智能维度</h4>
                    <p>评估模型的空间推理、具身任务规划能力</p>
                    <ul>
                        <li>搭建积木：理解和执行积木搭建指令</li>
                        <li>智慧拼图：识别图案并完成拼图任务</li>
                        <li>理解按钮：识别按钮功能并预测操作结果</li>
                    </ul>
                </div>
                <div class="dimension-card">
                    <h4>社会活动维度</h4>
                    <p>评估模型在社会场景中的规划和执行能力</p>
                    <ul>
                        <li>整理桌面：根据物品类别和空间关系进行合理摆放</li>
                        <li>打扫房间：规划清洁任务并执行合理操作序列</li>
                        <li>准备行李：根据旅行需求选择和整理合适物品</li>
                    </ul>
                </div>
            </div>
        </section>
        
        <section class="section hidden" id="dimension-results">
            <h2>模型维度能力对比</h2>
            
            <div class="controls">
                <div class="model-selectors" id="dimensionModelSelectors">
                    <!-- 维度视图的模型选择器将通过JavaScript动态生成 -->
                </div>
                <button class="select-all" id="dimensionSelectAllBtn">全选/取消全选</button>
            </div>
            
            <div class="chart-container">
                <canvas id="dimensionRadarChart"></canvas>
            </div>
            
            <table id="dimensionResultsTable">
                <thead>
                    <tr>
                        <th data-sort="name">模型 <i class="fas fa-sort"></i></th>
                        <th data-sort="avg">平均得分 <i class="fas fa-sort"></i></th>
                        <th data-sort="0">物体理解 <i class="fas fa-sort"></i></th>
                        <th data-sort="1">空间智能 <i class="fas fa-sort"></i></th>
                        <th data-sort="2">社会活动 <i class="fas fa-sort"></i></th>
                    </tr>
                </thead>
                <tbody>
                    <!-- 表格内容将通过JavaScript动态生成 -->
                </tbody>
            </table>
        </section>
        
        <!-- 发展阶段对照榜内容 -->
        <section class="section hidden" id="stage-view">
            <h2>发展阶段对照榜</h2>
            <p>将模型的三个维度得分映射到三维空间，并与儿童发展阶段（0-6岁）进行对照。</p>
            
            <!-- 重新布局：将三维可视化图形和说明面板并排显示 -->
            <div class="stage-chart-wrapper">
                <div id="stage-chart-container"></div>
                <div id="stage-chart-info">
                    <h3>发展阶段说明</h3>
                    <p>每个球面代表不同的发展阶段：</p>
                    <ul>
                        <li><span class="age-sphere" style="background-color: #FF6B6B;"></span> 0-1岁：感知运动阶段（早期至中期）</li>
                        <li><span class="age-sphere" style="background-color: #f28f0c;"></span> 1-2岁：感知运动阶段（晚期至结束）</li>
                        <li><span class="age-sphere" style="background-color: #f5f106;"></span> 2-3岁：前运算阶段（早期：符号功能期）</li>
                        <li><span class="age-sphere" style="background-color: #06D6A0;"></span> 3-4岁：前运算阶段（符号功能期至直觉期过渡）</li>
                        <li><span class="age-sphere" style="background-color: #118AB2;"></span> 4-5岁：前运算阶段（中期：直觉思维期）</li>
                        <li><span class="age-sphere" style="background-color: #073B4C;"></span> 5-6岁：前运算阶段（早期：直觉期末端）</li>
                    </ul>
                    <p>每个点代表一个模型，其位置由三个维度得分决定。</p>
                    <div class="stage-controls">
                        <button id="resetView">重置视角</button>
                        <button id="toggleSpheres">切换球面显示</button>
                    </div>
                </div>
            </div>
            
            <h3>模型发展年龄对照表</h3>
            <table id="stageTable">
                <thead>
                    <tr>
                        <th data-sort="name">模型 <i class="fas fa-sort"></i></th>
                        <th data-sort="avgAge">综合发展年龄 <i class="fas fa-sort"></i></th>
                        <th data-sort="0">物体理解年龄 <i class="fas fa-sort"></i></th>
                        <th data-sort="1">空间智能年龄 <i class="fas fa-sort"></i></th>
                        <th data-sort="2">社会活动年龄 <i class="fas fa-sort"></i></th>
                    </tr>
                </thead>
                <tbody>
                    <!-- 表格内容将通过JavaScript动态生成 -->
                </tbody>
            </table>
        </section>
        
        <!-- 关于我们视图内容 -->
        <section class="section hidden" id="about-view">
            <h2>关于我们</h2>
            <p>TongTest-通用具身交互测试平台致力于为研究者和开发者提供全面、客观的AI模型评估数据。</p>
            
            <h3>我们的使命</h3>
            <p>通过系统化的测试和评估，推动多模态大模型技术的发展和应用。</p>
            
            <h3>测试方法</h3>
            <p>我们采用标准化的测试流程和评估指标，确保测试结果的可靠性和可比性。</p>
            
            <h3>联系我们</h3>
            <p>如有任何问题或建议，请通过邮箱 research@bigai.ai 与我们联系。</p>
        </section>
    </main>
    
    <footer>
        <p>TongTest测试结果发布平台 &copy; 2025 - 专注于AI智能体能力评估与比较</p>
    </footer>

    <script>
        // 测试数据 - 17个模型在8项任务上的得分
        const modelData = [
            { name: "Gemini-Pro-2.5", scores: [48.00, 12.38, 10.00, 15.00, 0.00, 26.68, 22.77, 68.06], avg: 25.36 },
            { name: "OpenAI o3", scores: [54.00, 10.30, 10.00, 17.38, 8.33, 14.31, 18.77, 65.92], avg: 24.88 },
            { name: "Gemini-Flash-2.5", scores: [42.00, 11.05, 5.50, 15.60, 3.33, 25.83, 23.22, 68.20], avg: 24.34 },
            { name: "GPT-5", scores: [36.00, 9.50, 3.75, 15.00, 3.33, 28.68, 16.00, 69.06], avg: 22.67 },
            { name: "Claude-4-Sonnet", scores: [44.00, 5.18, 8.75, 15.33, 0.00, 19.81, 14.85, 66.44], avg: 21.67 },
            { name: "Claude-3.7-Sonnet", scores: [46.00, 3.40, 8.88, 14.83, 0.00, 22.76, 16.12, 59.74], avg: 21.59 },
            { name: "Claude-3.5-Sonnet", scores: [42.00, 6.00, 8.00, 15.45, 0.00, 12.33, 13.47, 64.24], avg: 20.19 },
            { name: "Grok3", scores: [52.00, 3.35, 9.88, 13.93, 0.00, 8.37, 17.20, 50.24], avg: 19.37 },
            { name: "Doubao-vision-pro-32k", scores: [36.00, 7.75, 12.50, 12.58, 0.00, 24.17, 4.22, 56.70], avg: 19.24 },
            { name: "OpenAI o4-mini", scores: [38.00, 4.23, 0.00, 14.83, 1.67, 13.67, 1.52, 66.40], avg: 17.54 },
            { name: "GPT-4o", scores: [32.00, 8.18, 10.00, 15.40, 1.67, 18.42, 6.50, 46.30], avg: 17.38 },
            { name: "GPT-4o-mini", scores: [34.00, 3.75, 5.75, 14.90, 1.67, 19.07, 1.50, 54.96], avg: 16.95 },
            { name: "Qwen-VL-max", scores: [44.00, 0.00, 0.00, 15.20, 1.67, 15.96, 1.25, 48.14], avg: 15.78 },
            { name: "Llama-4-Scout-17B-128E-Instruct", scores: [36.00, 3.00, 3.75, 15.73, 0.00, 15.75, 0.42, 50.30], avg: 15.62 },
            { name: "Llama-4-Scout-17B-16E-Instruct", scores: [28.00, 2.00, 6.25, 15.73, 0.00, 8.94, 1.38, 42.56], avg: 13.11 },
            { name: "Qwen-VL-plus", scores: [6.00, 0.38, 0.00, 15.90, 3.33, 16.67, 1.82, 34.16], avg: 9.78 },
            { name: "Llama-3.1-90B-Vision-Instruct", scores: [6.00, 0.00, 0.00, 15.90, 0.00, 4.67, 0.42, 6.80], avg: 4.22 }
        ];

        // 任务名称（保持不变）
        const tasks = ["物品计数", "准备行李", "搭建积木", "智慧拼图", "理解按钮", "整理桌面", "打扫房间", "挑选礼物"];

        // 维度定义（保持不变）
        const dimensions = ["物体理解", "空间智能", "社会活动"];

        // 计算每个模型在三个维度上的得分（根据新数据更新计算逻辑）
        const dimensionData = modelData.map(model => {
            // 物体理解维度：物品计数(0)和挑选礼物(7)的平均分
            const objectUnderstanding = (model.scores[0] + model.scores[7]) / 2;
            
            // 空间智能维度：搭建积木(2)、智慧拼图(3)、理解按钮(4)的平均分
            const spatialIntelligence = (model.scores[2] + model.scores[3] + model.scores[4]) / 3;
            
            // 社会活动维度：准备行李(1)、整理桌面(5)、打扫房间(6)的平均分
            const socialActivity = (model.scores[1] + model.scores[5] + model.scores[6]) / 3;
            
            // 维度平均分
            const dimensionAvg = (objectUnderstanding + spatialIntelligence + socialActivity) / 3;
            
            // 计算发展年龄
            // const avgAge = (dimensionAvg / 100) * 6;  
            // const objectAge = (objectUnderstanding / 100) * 6;
            // const spatialAge = (spatialIntelligence / 100) * 6;
            // const socialAge = (socialActivity / 100) * 6;

            const avgAge = (2/(1+Math.exp(-0.05*dimensionAvg))- 1) * 6;  
            const objectAge = (2/(1+Math.exp(-0.05*objectUnderstanding))- 1) * 6;  
            const spatialAge = (2/(1+Math.exp(-0.05*spatialIntelligence))- 1) * 6;  
            const socialAge = (2/(1+Math.exp(-0.05*socialActivity))- 1) * 6;  
            
            return {
                name: model.name,
                scores: [objectUnderstanding, spatialIntelligence, socialActivity],
                ages: [objectAge, spatialAge, socialAge],
                avg: dimensionAvg,
                avgAge: avgAge
            };
        });
        
        // 颜色数组用于雷达图
        const colors = [
            'rgba(54, 162, 235, 1)',
            'rgba(255, 99, 132, 1)',
            'rgba(75, 192, 192, 1)',
            'rgba(255, 159, 64, 1)',
            'rgba(153, 102, 255, 1)',
            'rgba(255, 205, 86, 1)',
            'rgba(201, 203, 207, 1)',
            'rgba(100, 200, 150, 1)',
            'rgba(200, 100, 150, 1)',
            'rgba(150, 100, 200, 1)',
            'rgba(100, 150, 200, 1)',
            'rgba(200, 150, 100, 1)',
            'rgba(150, 200, 100, 1)',
            'rgba(100, 200, 200, 1)',
            'rgba(200, 100, 100, 1)',
            'rgba(100, 100, 200, 1)',
            'rgba(200, 200, 100, 1)'
        ];
        
        // 初始化模型选择状态 - 现在使用同一个状态数组
        let selectedModels = Array(modelData.length).fill(true);
        
        // 当前视图状态
        let currentView = 'ability';
        
        // 当前排序状态
        let currentSort = {
            column: 'avg',
            direction: 'desc'
        };

        // 三维场景相关变量
        let scene, camera, renderer, controls;
        let spheresVisible = true;

        // 初始化表格
        function initTable() {
            const tbody = document.querySelector('#resultsTable tbody');
            tbody.innerHTML = '';
            
            // 排序数据
            const sortedData = sortModelData(modelData, currentSort.column, currentSort.direction);
            
            sortedData.forEach((model, index) => {
                const row = document.createElement('tr');
                
                // 模型名称
                const nameCell = document.createElement('td');
                const nameDiv = document.createElement('div');
                nameDiv.className = 'model-name';
                
                // 为前三名添加奖牌
                if (index < 3) {
                    const medal = document.createElement('i');
                    if (index === 0) {
                        medal.className = 'medal gold fas fa-medal';
                    } else if (index === 1) {
                        medal.className = 'medal silver fas fa-medal';
                    } else if (index === 2) {
                        medal.className = 'medal bronze fas fa-medal';
                    }
                    nameDiv.appendChild(medal);
                }
                
                nameDiv.appendChild(document.createTextNode(model.name));
                nameCell.appendChild(nameDiv);
                row.appendChild(nameCell);
                
                // 平均分
                const avgCell = document.createElement('td');
                avgCell.textContent = model.avg.toFixed(1);
                avgCell.className = 'score-cell';
                row.appendChild(avgCell);
                
                // 各项任务得分
                model.scores.forEach(score => {
                    const scoreCell = document.createElement('td');
                    scoreCell.textContent = score;
                    scoreCell.className = 'score-cell';
                    row.appendChild(scoreCell);
                });
                
                tbody.appendChild(row);
            });
        }
        
        // 初始化维度表格
        function initDimensionTable() {
            const tbody = document.querySelector('#dimensionResultsTable tbody');
            tbody.innerHTML = '';
            
            // 排序数据
            const sortedData = sortModelData(dimensionData, currentSort.column, currentSort.direction);
            
            sortedData.forEach((model, index) => {
                const row = document.createElement('tr');
                
                // 模型名称
                const nameCell = document.createElement('td');
                const nameDiv = document.createElement('div');
                nameDiv.className = 'model-name';
                
                // 为前三名添加奖牌
                if (index < 3) {
                    const medal = document.createElement('i');
                    if (index === 0) {
                        medal.className = 'medal gold fas fa-medal';
                    } else if (index === 1) {
                        medal.className = 'medal silver fas fa-medal';
                    } else if (index === 2) {
                        medal.className = 'medal bronze fas fa-medal';
                    }
                    nameDiv.appendChild(medal);
                }
                
                nameDiv.appendChild(document.createTextNode(model.name));
                nameCell.appendChild(nameDiv);
                row.appendChild(nameCell);
                
                // 平均分
                const avgCell = document.createElement('td');
                avgCell.textContent = model.avg.toFixed(1);
                avgCell.className = 'score-cell';
                row.appendChild(avgCell);
                
                // 各项维度得分
                model.scores.forEach(score => {
                    const scoreCell = document.createElement('td');
                    scoreCell.textContent = score.toFixed(1);
                    scoreCell.className = 'score-cell';
                    row.appendChild(scoreCell);
                });
                
                tbody.appendChild(row);
            });
        }
        
        // 初始化发展阶段对照表
        function initStageTable() {
            const tbody = document.querySelector('#stageTable tbody');
            tbody.innerHTML = '';
            
            // 按当前排序排序数据
            const sortedData = sortStageData(dimensionData, currentSort.column, currentSort.direction);
            
            sortedData.forEach((model, index) => {
                const row = document.createElement('tr');
                
                // 模型名称
                const nameCell = document.createElement('td');
                nameCell.textContent = model.name;
                row.appendChild(nameCell);
                
                // 综合发展年龄
                const avgAgeCell = document.createElement('td');
                avgAgeCell.textContent = model.avgAge.toFixed(1) + " 岁";
                avgAgeCell.className = 'score-cell';
                row.appendChild(avgAgeCell);
                
                // 各项维度年龄
                model.ages.forEach(age => {
                    const ageCell = document.createElement('td');
                    ageCell.textContent = age.toFixed(1) + " 岁";
                    ageCell.className = 'score-cell';
                    row.appendChild(ageCell);
                });
                
                tbody.appendChild(row);
            });
        }
        
        // 排序函数
        function sortModelData(data, column, direction) {
            return [...data].sort((a, b) => {
                let aValue, bValue;
                
                if (column === 'name') {
                    aValue = a.name;
                    bValue = b.name;
                } else if (column === 'avg') {
                    aValue = a.avg;
                    bValue = b.avg;
                } else {
                    aValue = a.scores[parseInt(column)];
                    bValue = b.scores[parseInt(column)];
                }
                
                if (direction === 'asc') {
                    return aValue < bValue ? -1 : aValue > bValue ? 1 : 0;
                } else {
                    return aValue > bValue ? -1 : aValue < bValue ? 1 : 0;
                }
            });
        }
        
        // 发展阶段表格排序函数
        function sortStageData(data, column, direction) {
            return [...data].sort((a, b) => {
                let aValue, bValue;
                
                if (column === 'name') {
                    aValue = a.name;
                    bValue = b.name;
                } else if (column === 'avgAge') {
                    aValue = a.avgAge;
                    bValue = b.avgAge;
                } else {
                    aValue = a.ages[parseInt(column)];
                    bValue = b.ages[parseInt(column)];
                }
                
                if (direction === 'asc') {
                    return aValue < bValue ? -1 : aValue > bValue ? 1 : 0;
                } else {
                    return aValue > bValue ? -1 : aValue < bValue ? 1 : 0;
                }
            });
        }
        
        // 更新排序图标
        function updateSortIcons(tableId, sortColumn, sortDirection) {
            const ths = document.querySelectorAll(`#${tableId} th`);
            ths.forEach(th => {
                const icon = th.querySelector('i');
                if (th.dataset.sort === sortColumn) {
                    icon.className = sortDirection === 'asc' ? 'fas fa-sort-up' : 'fas fa-sort-down';
                } else {
                    icon.className = 'fas fa-sort';
                }
            });
        }
        
        // 初始化模型选择器
        function initModelSelectors() {
            const container = document.getElementById('modelSelectors');
            container.innerHTML = '';
            
            modelData.forEach((model, index) => {
                const label = document.createElement('label');
                label.className = 'model-checkbox';
                
                const checkbox = document.createElement('input');
                checkbox.type = 'checkbox';
                checkbox.checked = selectedModels[index];
                checkbox.dataset.index = index;
                
                checkbox.addEventListener('change', function() {
                    selectedModels[index] = this.checked;
                    updateRadarChart();
                });
                
                label.appendChild(checkbox);
                label.appendChild(document.createTextNode(model.name));
                
                container.appendChild(label);
            });
        }
        
        // 初始化维度模型选择器
        function initDimensionModelSelectors() {
            const container = document.getElementById('dimensionModelSelectors');
            container.innerHTML = '';
            
            dimensionData.forEach((model, index) => {
                const label = document.createElement('label');
                label.className = 'model-checkbox';
                
                const checkbox = document.createElement('input');
                checkbox.type = 'checkbox';
                checkbox.checked = selectedModels[index];
                checkbox.dataset.index = index;
                
                checkbox.addEventListener('change', function() {
                    selectedModels[index] = this.checked;
                    updateDimensionRadarChart();
                });
                
                label.appendChild(checkbox);
                label.appendChild(document.createTextNode(model.name));
                
                container.appendChild(label);
            });
        }
        
        // 更新模型选择器状态（用于视图切换时同步状态）
        function updateModelSelectors() {
            document.querySelectorAll('#modelSelectors input[type="checkbox"]').forEach((checkbox, index) => {
                checkbox.checked = selectedModels[index];
            });
        }
        
        // 更新维度模型选择器状态（用于视图切换时同步状态）
        function updateDimensionModelSelectors() {
            document.querySelectorAll('#dimensionModelSelectors input[type="checkbox"]').forEach((checkbox, index) => {
                checkbox.checked = selectedModels[index];
            });
        }
        
        // 初始化雷达图
        let radarChart;
        function initRadarChart() {
            const ctx = document.getElementById('radarChart').getContext('2d');
            
            const datasets = modelData.map((model, index) => ({
                label: model.name,
                data: model.scores,
                backgroundColor: 'rgba(0, 0, 0, 0)', // 透明背景
                borderColor: colors[index],
                borderWidth: 2,
                pointBackgroundColor: colors[index],
                pointBorderColor: '#fff',
                pointHoverBackgroundColor: '#fff',
                pointHoverBorderColor: colors[index],
                hidden: !selectedModels[index]
            }));
            
            radarChart = new Chart(ctx, {
                type: 'radar',
                data: {
                    labels: tasks,
                    datasets: datasets
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        r: {
                            angleLines: {
                                display: true
                            },
                            suggestedMin: 0,
                            suggestedMax: 100
                        }
                    },
                    plugins: {
                        legend: {
                            position: 'top',
                        },
                        tooltip: {
                            mode: 'index',
                            intersect: false
                        }
                    }
                }
            });
        }
        
        // 初始化维度雷达图
        let dimensionRadarChart;
        function initDimensionRadarChart() {
            const ctx = document.getElementById('dimensionRadarChart').getContext('2d');
            
            const datasets = dimensionData.map((model, index) => ({
                label: model.name,
                data: model.scores,
                backgroundColor: 'rgba(0, 0, 0, 0)', // 透明背景
                borderColor: colors[index],
                borderWidth: 2,
                pointBackgroundColor: colors[index],
                pointBorderColor: '#fff',
                pointHoverBackgroundColor: '#fff',
                pointHoverBorderColor: colors[index],
                hidden: !selectedModels[index]
            }));
            
            dimensionRadarChart = new Chart(ctx, {
                type: 'radar',
                data: {
                    labels: dimensions,
                    datasets: datasets
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        r: {
                            angleLines: {
                                display: true
                            },
                            suggestedMin: 0,
                            suggestedMax: 100
                        }
                    },
                    plugins: {
                        legend: {
                            position: 'top',
                        },
                        tooltip: {
                            mode: 'index',
                            intersect: false
                        }
                    }
                }
            });
        }
        
        // 更新雷达图
        function updateRadarChart() {
            radarChart.data.datasets.forEach((dataset, index) => {
                dataset.hidden = !selectedModels[index];
            });
            radarChart.update();
        }
        
        // 更新维度雷达图
        function updateDimensionRadarChart() {
            dimensionRadarChart.data.datasets.forEach((dataset, index) => {
                dataset.hidden = !selectedModels[index];
            });
            dimensionRadarChart.update();
        }
        
        // 初始化三维场景
        function initStageChart() {
            const container = document.getElementById('stage-chart-container');
            
            // 创建场景
            scene = new THREE.Scene();
            scene.background = new THREE.Color(0xf5f7fa);
            
            // 创建相机
            camera = new THREE.PerspectiveCamera(75, container.clientWidth / container.clientHeight, 0.1, 1000);
            camera.position.set(100, 100, 100);
            
            // 创建渲染器
            renderer = new THREE.WebGLRenderer({ antialias: true });
            renderer.setSize(container.clientWidth, container.clientHeight);
            container.appendChild(renderer.domElement);
            
            // 添加轨道控制器
            controls = new THREE.OrbitControls(camera, renderer.domElement);
            controls.enableDamping = true;
            controls.dampingFactor = 0.05;
            
            // 添加坐标轴
            const axesHelper = new THREE.AxesHelper(120);
            scene.add(axesHelper);
            
            // 添加坐标轴标签和刻度
            addAxisLabelsAndTicks();
            
            // 添加发展阶段球面
            addDevelopmentSpheres();
            
            // 添加模型点
            addModelPoints();
            
            // 添加光源
            const ambientLight = new THREE.AmbientLight(0xffffff, 0.6);
            scene.add(ambientLight);
            
            const directionalLight = new THREE.DirectionalLight(0xffffff, 0.8);
            directionalLight.position.set(50, 50, 50);
            scene.add(directionalLight);
            
            // 动画循环
            function animate() {
                requestAnimationFrame(animate);
                controls.update();
                renderer.render(scene, camera);
            }
            animate();
            
            // 窗口大小变化时调整渲染器
            window.addEventListener('resize', function() {
                camera.aspect = container.clientWidth / container.clientHeight;
                camera.updateProjectionMatrix();
                renderer.setSize(container.clientWidth, container.clientHeight);
            });


            const raycaster = new THREE.Raycaster();
            const mouse = new THREE.Vector2();
            const infoPanel = document.getElementById('infoPanel');

            renderer.domElement.addEventListener('click', (event) => {
                // 计算鼠标位置 (标准化设备坐标 -1 到 1)
                const rect = renderer.domElement.getBoundingClientRect();
                mouse.x = ((event.clientX - rect.left) / rect.width) * 2 - 1;
                mouse.y = -((event.clientY - rect.top) / rect.height) * 2 + 1;

                // 射线检测
                raycaster.setFromCamera(mouse, camera);
                const intersects = raycaster.intersectObjects(spheres);

                if (intersects.length > 0) {
                    const sphere = intersects[0].object;
                    const { x, y, z } = sphere.userData.coords;

                    // 显示浮动面板
                    infoPanel.style.display = 'block';
                    infoPanel.style.left = event.pageX + 10 + 'px';
                    infoPanel.style.top = event.pageY + 10 + 'px';
                    infoPanel.innerHTML = `
                        <strong>${sphere.userData.name}</strong><br>
                        物体理解: ${(x/20).toFixed(1)}, 空间智能: ${(y/20).toFixed(1)}, 社会活动: ${(z/20).toFixed(1)}
                    `;
                } else {
                    // 点到空白处隐藏面板
                    infoPanel.style.display = 'none';
                }
            });

        }
        
        // 添加坐标轴标签和刻度
        function addAxisLabelsAndTicks() {
            // 物体理解轴标签和刻度
            addAxisWithTicks("物体理解", new THREE.Vector3(1, 0, 0), 130);
            
            // 空间智能轴标签和刻度
            addAxisWithTicks("空间智能", new THREE.Vector3(0, 1, 0), 130);
            
            // 社会活动轴标签和刻度
            addAxisWithTicks("社会活动", new THREE.Vector3(0, 0, 1), 130);
        }
        
        // 为单个坐标轴添加标签和刻度
        function addAxisWithTicks(label, direction, length) {
            // 添加主标签
            const mainLabel = createTextSprite(label);
            mainLabel.position.copy(direction.clone().multiplyScalar(length + 15));
            scene.add(mainLabel);
            
            // 添加刻度线
            for (let i = 0; i <= 120; i += 20) {
                // 添加刻度线
                const tickGeometry = new THREE.BoxGeometry(1, 1, 1);
                const tickMaterial = new THREE.MeshBasicMaterial({ color: 0x333333 });
                const tick = new THREE.Mesh(tickGeometry, tickMaterial);
                
                // 根据方向设置刻度位置
                if (direction.x !== 0) {
                    tick.position.set(i, 0, 0);
                    tick.scale.set(0.5, 1, 1);
                } else if (direction.y !== 0) {
                    tick.position.set(0, i, 0);
                    tick.scale.set(1, 0.5, 1);
                } else {
                    tick.position.set(0, 0, i);
                    tick.scale.set(1, 1, 0.5);
                }
                
                scene.add(tick);
                
                // 添加刻度标签（年龄）
                const age = (i / 120) * 6;
                const tickLabel = createTickLabel(age.toFixed(1) + "岁");
                
                // 根据方向设置标签位置
                if (direction.x !== 0) {
                    tickLabel.position.set(i, -3, -3);
                } else if (direction.y !== 0) {
                    tickLabel.position.set(-3, i, -3);
                } else {
                    tickLabel.position.set(-3, -3, i);
                }
                
                scene.add(tickLabel);
            }
        }
        
        // 创建文本精灵
        function createTextSprite(text) {
            const canvas = document.createElement('canvas');
            const context = canvas.getContext('2d');
            canvas.width = 256;
            canvas.height = 128;

            context.fillStyle = 'rgba(255, 255, 255, 0.0)'; // 白色背景 + 60% 透明度
            context.fillRect(0, 0, canvas.width, canvas.height);
            
            context.fillStyle = '#1a73e8';
            context.font = 'bold 48px Arial';
            context.textAlign = 'center';
            context.textBaseline = 'middle';
            context.fillText(text, canvas.width / 2, canvas.height / 2);
            
            const texture = new THREE.CanvasTexture(canvas);
            const material = new THREE.SpriteMaterial({ map: texture, transparent:true, depthTest:false, depthWrite:false });
            const sprite = new THREE.Sprite(material);
            sprite.renderOrder = 999;
            sprite.scale.set(30, 15, 1);
            
            return sprite;
        }
        
        // 创建刻度标签
        function createTickLabel(text) {
            const canvas = document.createElement('canvas');
            const context = canvas.getContext('2d');
            canvas.width = 128;
            canvas.height = 64;

            context.fillStyle = 'rgba(255, 255, 255, 0.0)'; // 白色背景 + 60% 透明度
            context.fillRect(0, 0, canvas.width, canvas.height);
            
            context.fillStyle = '#333';
            context.font = '20px Arial';
            context.textAlign = 'center';
            context.textBaseline = 'middle';
            context.fillText(text, canvas.width / 2, canvas.height / 2);
            
            const texture = new THREE.CanvasTexture(canvas);
            const material = new THREE.SpriteMaterial({ map: texture, transparent:true, depthTest:false, depthWrite:false });
            const sprite = new THREE.Sprite(material);
            sprite.renderOrder = 999;
            sprite.scale.set(10, 5, 1);
            
            return sprite;
        }
        

        // 添加发展阶段球面
        function addDevelopmentSpheres() {
            const ageSpheres = [
                { age: 1, color: 0xFF6B6B, radius: 20, description: "感知运动阶段（早期至中期）" },   // 0-1岁
                { age: 2, color: 0xf28f0c, radius: 40, description: "感知运动阶段（晚期至结束）" }, // 1-2岁
                { age: 3, color: 0xf5f106, radius: 60, description: "前运算阶段（早期：符号功能期）" },     // 2-3岁
                { age: 4, color: 0x06D6A0, radius: 80, description: "前运算阶段（符号功能期至直觉期过渡）" }, // 3-4岁
                { age: 5, color: 0x118AB2, radius: 100, description: "前运算阶段（直觉思维期）" },  // 4-5岁
                { age: 6, color: 0x073B4C, radius: 120, description: "前运算阶段（直觉期末端）" } // 5-6岁
            ];
            
            ageSpheres.forEach(sphere => {
                const geometry = new THREE.SphereGeometry(sphere.radius, 32, 32);
                const material = new THREE.MeshBasicMaterial({ 
                    color: sphere.color, 
                    transparent: true, 
                    opacity: 0.1,
                    wireframe: true
                });
                const mesh = new THREE.Mesh(geometry, material);
                scene.add(mesh);
                
                // 添加年龄标签
                // const ageLabel = createAgeLabel(sphere.age + "岁 - " + sphere.description);
                // ageLabel.position.set(sphere.radius + 8, 0, 0);
                // scene.add(ageLabel);
            });
        }
        
        // 创建年龄标签
        function createAgeLabel(text) {
            const canvas = document.createElement('canvas');
            const context = canvas.getContext('2d');
            canvas.width = 256;
            canvas.height = 64;

            context.fillStyle = 'rgba(255, 255, 255, 0.0)'; // 白色背景 + 60% 透明度
            context.fillRect(0, 0, canvas.width, canvas.height);
            
            context.fillStyle = '#333';
            context.font = '20px Arial';
            context.textAlign = 'left';
            context.textBaseline = 'middle';
            context.fillText(text, 10, canvas.height / 2);
            
            const texture = new THREE.CanvasTexture(canvas);
            const material = new THREE.SpriteMaterial({ map: texture, transparent:true, depthTest:false, depthWrite:false });
            const sprite = new THREE.Sprite(material);
            sprite.renderOrder = 999;
            sprite.scale.set(25, 6, 1);
            
            return sprite;
        }
        
        // 添加模型点
        const spheres = []; // 全局数组，存放所有点
        function addModelPoints() {
            dimensionData.forEach((model, index) => {
                // 将得分转换为三维坐标 (0-100分对应0-100单位)
                const x = model.scores[0]/100*120; // 物体理解
                const y = model.scores[1]/100*120; // 空间智能
                const z = model.scores[2]/100*120; // 社会活动

                // 计算点到原点的距离
                const distance = Math.sqrt(x * x + y * y + z * z);
                const maxDistance = 60 * Math.sqrt(3);  // 三轴最大值时的对角线距离

                // 归一化 (0 = 原点, 1 = 最远)
                const t = distance / maxDistance;

                // 插值颜色: 近 = 红色, 远 = 蓝灰色
                const r = Math.round(255 * (1 - t));          // 距离近 → 红色分量高
                const g = Math.round(50 + 100 * t);           // 随距离增加，绿色略增
                const b = Math.round(50 + 200 * t);           // 距离远 → 蓝色分量高
                const color = new THREE.Color(`rgb(${r},${g},${b})`);

                
                // 创建球体表示模型
                const geometry = new THREE.SphereGeometry(1, 16, 16);
                const material = new THREE.MeshBasicMaterial({ 
                    color: color,
                    transparent: true,
                    opacity: 0.95
                });
                const sphere = new THREE.Mesh(geometry, material);
                sphere.position.set(x, y, z);

                // 保存信息，后面点选时可以用
                sphere.userData = {
                    name: model.name,
                    coords: { x: x.toFixed(2), y: y.toFixed(2), z: z.toFixed(2) }
                };

                scene.add(sphere);
                spheres.push(sphere);
                
                // 添加模型名称标签
                const label = createModelLabel(model.name);
                label.position.set(x , y-2, z);
                scene.add(label);
            });
        }
        
        // 创建模型标签
        function createModelLabel(text) {
            const scaleFactor = 4;  // 分辨率放大倍数
            const canvas = document.createElement('canvas');
            const context = canvas.getContext('2d');
            canvas.width = 192 * scaleFactor;
            canvas.height = 32 * scaleFactor;

            context.fillStyle = 'rgba(255, 255, 255, 0.0)'; // 白色背景 + 60% 透明度
            context.fillRect(0, 0, canvas.width, canvas.height);
            
            context.fillStyle = '#333';
            context.font = 'bold 40px Arial';
            context.textAlign = 'center';
            context.textBaseline = 'middle';
            context.fillText(text, 96*scaleFactor, canvas.height / 2);
            
            const texture = new THREE.CanvasTexture(canvas);
            texture.anisotropy = 16;   // 提升采样质量
            texture.needsUpdate = true;
            const material = new THREE.SpriteMaterial({ map: texture, transparent:true, depthTest:false, depthWrite:false });
            const sprite = new THREE.Sprite(material);
            sprite.renderOrder = 999;
            sprite.scale.set(20, 6, 1);
            
            return sprite;
        }
        
        // 切换视图
        function switchView(view) {
            // 更新当前视图状态
            currentView = view;
            
            // 隐藏所有视图
            document.querySelectorAll('.section').forEach(section => {
                section.classList.add('hidden');
            });
            
            // 显示选中的视图
            if (view === 'ability') {
                document.getElementById('ability-view').classList.remove('hidden');
                document.getElementById('ability-results').classList.remove('hidden');
                // 同步模型选择器状态
                updateModelSelectors();
                // 更新雷达图
                updateRadarChart();
                // 更新排序图标
                updateSortIcons('resultsTable', currentSort.column, currentSort.direction);
            } else if (view === 'dimension') {
                document.getElementById('dimension-view').classList.remove('hidden');
                document.getElementById('dimension-results').classList.remove('hidden');
                // 同步模型选择器状态
                updateDimensionModelSelectors();
                // 更新雷达图
                updateDimensionRadarChart();
                // 更新排序图标
                updateSortIcons('dimensionResultsTable', currentSort.column, currentSort.direction);
            } else if (view === 'stage') {
                document.getElementById('stage-view').classList.remove('hidden');
                initStageTable();
                // 更新排序图标
                updateSortIcons('stageTable', currentSort.column, currentSort.direction);
                // 初始化三维场景
                if (!scene) {
                    initStageChart();
                }
            } else if (view === 'about') {
                document.getElementById('about-view').classList.remove('hidden');
            }
            
            // 更新导航栏活动状态
            document.querySelectorAll('nav a').forEach(link => {
                link.classList.remove('active');
                if (link.dataset.view === view) {
                    link.classList.add('active');
                }
            });
            
            // 更新视图切换器活动状态
            document.querySelectorAll('.view-option').forEach(option => {
                option.classList.remove('active');
                if (option.dataset.view === view) {
                    option.classList.add('active');
                }
            });
        }
        
        // 全选/取消全选功能
        document.getElementById('selectAllBtn').addEventListener('click', function() {
            const allSelected = selectedModels.every(val => val);
            
            selectedModels = selectedModels.map(() => !allSelected);
            
            // 更新复选框状态
            updateModelSelectors();
            
            // 更新雷达图
            updateRadarChart();
        });
        
        // 维度视图全选/取消全选功能
        document.getElementById('dimensionSelectAllBtn').addEventListener('click', function() {
            const allSelected = selectedModels.every(val => val);
            
            selectedModels = selectedModels.map(() => !allSelected);
            
            // 更新复选框状态
            updateDimensionModelSelectors();
            
            // 更新雷达图
            updateDimensionRadarChart();
        });
        
        // 视图切换功能
        document.querySelectorAll('.view-option').forEach(option => {
            option.addEventListener('click', function() {
                const view = this.dataset.view;
                switchView(view);
            });
        });
        
        // 导航菜单交互
        document.querySelectorAll('nav a').forEach(link => {
            link.addEventListener('click', function(e) {
                e.preventDefault();
                const view = this.dataset.view;
                switchView(view);
            });
        });
        
        // 表格排序功能
        function initTableSorting() {
            // 能力视图表格排序
            document.querySelectorAll('#resultsTable th[data-sort]').forEach(th => {
                th.addEventListener('click', function() {
                    const column = this.dataset.sort;
                    let direction = 'desc';
                    
                    if (currentSort.column === column) {
                        direction = currentSort.direction === 'desc' ? 'asc' : 'desc';
                    }
                    
                    currentSort = { column, direction };
                    updateSortIcons('resultsTable', column, direction);
                    initTable();
                });
            });
            
            // 维度视图表格排序
            document.querySelectorAll('#dimensionResultsTable th[data-sort]').forEach(th => {
                th.addEventListener('click', function() {
                    const column = this.dataset.sort;
                    let direction = 'desc';
                    
                    if (currentSort.column === column) {
                        direction = currentSort.direction === 'desc' ? 'asc' : 'desc';
                    }
                    
                    currentSort = { column, direction };
                    updateSortIcons('dimensionResultsTable', column, direction);
                    initDimensionTable();
                });
            });
            
            // 发展阶段对照表排序
            document.querySelectorAll('#stageTable th[data-sort]').forEach(th => {
                th.addEventListener('click', function() {
                    const column = this.dataset.sort;
                    let direction = 'desc';
                    
                    if (currentSort.column === column) {
                        direction = currentSort.direction === 'desc' ? 'asc' : 'desc';
                    }
                    
                    currentSort = { column, direction };
                    updateSortIcons('stageTable', column, direction);
                    initStageTable();
                });
            });
        }
        
        // 初始化页面
        document.addEventListener('DOMContentLoaded', function() {
            initTable();
            initDimensionTable();
            initModelSelectors();
            initDimensionModelSelectors();
            initRadarChart();
            initDimensionRadarChart();
            initTableSorting();
            
            // 三维场景控制
            document.getElementById('resetView').addEventListener('click', function() {
                if (controls) {
                    controls.reset();
                }
            });
            
            document.getElementById('toggleSpheres').addEventListener('click', function() {
                // 切换球面显示/隐藏
                spheresVisible = !spheresVisible;
                scene.traverse(function(child) {
                    if (child instanceof THREE.Mesh && child.material.wireframe) {
                        child.visible = spheresVisible;
                    }
                });
            });
            
            // 默认显示能力视图
            switchView('ability');
        });
    </script>
</body>
</html>